<!DOCTYPE html>
<html>

<head>
	<title>TTC Abstract Search</title>
</head>

<body>
	<ol class="usa-breadcrumb__list">
		<li class="usa-breadcrumb__list-item">
			<a href="/" class="usa-breadcrumb__link">
				<span>Home</span>
			</a>
		</li>
		<li class="usa-breadcrumb__list-item usa-current" aria-current="page">
			<span>TTC Abstract Search</span>
		</li>
	</ol>
	<div id="app-root"></div>
	<script>
		(function () {
			function sleep(ms) {
				return new Promise(resolve => setTimeout(resolve, ms));
			}

			async function loadAfterScript(cb) {
				while (typeof TTCSearchApp !== "function") {
					console.log("waiting");
					await sleep(10);
				}
				cb();
			}

			const ttcParams = {
				rootId: 'app-root',
				basePath: '/',
				searchKey: 'abstract',
				src: 'https://www.techtransfer.nih.gov/modules/custom/nih_algolia/js/ott-search.js',
				title: 'TTC Abstract Search'
			}

			/* It takes a few millisocends for the webpack script to load and this must wait until that is done */
			loadAfterScript(function () { window.TTCSearchApp(ttcParams) });

		}());
	</script>
</body>

</html>